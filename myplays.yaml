- name: Creating file and directories
  hosts: localhost
  become: yes
  become_user: root

  tasks:
    - name: Creating empty file
      ansible.builtin.file:
        name: emptyfile
        state: touch
        mode: '0644'
        owner: ansible
        group: ansible
      register: empty_out

    - name: Validate empty file is created
      debug:
        msg: "{{empty_out.changed}}"

    - name: Create file with content
      ansible.builtin.copy:
        dest: contentfile
        content: |
          Creating a new file with content
          I am adding a new line to validate debug
        mode: '0644'
        owner: ansible
        group: ansible
      register: contentfile_out

    - name: Validate empty file
      debug:
        msg: "{{contentfile_out.changed}}"

    - name: validate the stat of file
      ansible.builtin.stat:
        path: /tmp/newfile.txt
      register: stat_out
      
    - name: check the status
      debug:
        msg: "File exits"
      when: stat_out.stat.exists

    - name: Creating directory
      ansible.builtin.file:
        name: newfolder
        state: directory

    - name: Rename directory
      ansible.builtin.command:
        cmd: mv newfolder path_changed
      args:
        removes: newfolder
        creates: path_changed

    - name: symlink
      ansible.builtin.file:
        src: /home/ansible/ansible/git_training_v3/myplays.yaml
        dest: /tmp/myplays.yaml
        state: link